"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/setup";
exports.ids = ["pages/api/setup"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

module.exports = require("sharp");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsetup.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsetup.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/setup.ts */ \"(api)/./pages/api/setup.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/setup\",\n        pathname: \"/api/setup\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_setup_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNldHVwJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZzZXR1cC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUNpRDtBQUNqRDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsZ0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLGdEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3BvbHlwLXNlZ21lbnRhdGlvbi13ZWIvP2JjNmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9zZXR1cC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NldHVwXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2V0dXBcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsetup.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/setup.ts":
/*!****************************!*\
  !*** ./pages/api/setup.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n// 이미지 분류 함수 (cancer/polyp/normal)\nasync function classifyImage(imagePath) {\n    try {\n        // 이미지를 로드하고 전처리\n        const imageBuffer = await sharp__WEBPACK_IMPORTED_MODULE_2___default()(imagePath).resize(224, 224) // 일반적인 CNN 입력 크기\n        .grayscale().raw().toBuffer();\n        // TODO: 실제 분류 모델 구현\n        // 현재는 임시로 이미지 특성에 따라 간단한 규칙 기반 분류\n        const mean = Array.from(imageBuffer).reduce((a, b)=>a + b, 0) / imageBuffer.length;\n        if (mean > 200) return \"normal\";\n        if (mean > 150) return \"polyp\";\n        return \"cancer\";\n    } catch (error) {\n        console.error(\"Classification error:\", error);\n        return \"unknown\";\n    }\n}\n// 이미지와 마스크를 비교하여 메트릭 계산\nasync function calculateMetrics(imagePath, maskPath) {\n    try {\n        const imageBuffer = await sharp__WEBPACK_IMPORTED_MODULE_2___default()(imagePath).raw().toBuffer();\n        const maskBuffer = await sharp__WEBPACK_IMPORTED_MODULE_2___default()(maskPath).raw().toBuffer();\n        let truePositives = 0;\n        let falsePositives = 0;\n        let falseNegatives = 0;\n        let trueNegatives = 0;\n        for(let i = 0; i < imageBuffer.length; i++){\n            const imagePixel = imageBuffer[i] > 127;\n            const maskPixel = maskBuffer[i] > 127;\n            if (imagePixel && maskPixel) truePositives++;\n            else if (imagePixel && !maskPixel) falsePositives++;\n            else if (!imagePixel && maskPixel) falseNegatives++;\n            else trueNegatives++;\n        }\n        const precision = truePositives / (truePositives + falsePositives) || 0;\n        const recall = truePositives / (truePositives + falseNegatives) || 0;\n        const dice = 2 * truePositives / (2 * truePositives + falsePositives + falseNegatives) || 0;\n        const iou = truePositives / (truePositives + falsePositives + falseNegatives) || 0;\n        return {\n            precision,\n            recall,\n            dice,\n            iou\n        };\n    } catch (error) {\n        console.error(`Error calculating metrics for ${imagePath}:`, error);\n        return {\n            precision: 0,\n            recall: 0,\n            dice: 0,\n            iou: 0\n        };\n    }\n}\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // 이미지 디렉토리에서 모든 파일 읽기\n        const imagesDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"images\");\n        const masksDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"masks\");\n        // 디렉토리가 없으면 생성\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(imagesDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(imagesDir, {\n                recursive: true\n            });\n        }\n        if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(masksDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(masksDir, {\n                recursive: true\n            });\n        }\n        const imageFiles = fs__WEBPACK_IMPORTED_MODULE_0___default().readdirSync(imagesDir).filter((file)=>file.endsWith(\".jpg\"));\n        console.log(`Found ${imageFiles.length} image files`);\n        const results = await Promise.all(imageFiles.map(async (filename)=>{\n            const id = filename.replace(\".jpg\", \"\");\n            const imagePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(imagesDir, filename);\n            const maskPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(masksDir, filename);\n            // 이미지와 마스크가 존재하는지 확인\n            if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(imagePath) || !fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(maskPath)) {\n                console.warn(`Missing files for ${filename}`);\n                return null;\n            }\n            // 메트릭 계산\n            const metrics = await calculateMetrics(imagePath, maskPath);\n            // 분류 결정 (예시: IoU 점수 기반)\n            let classification = \"normal\";\n            if (metrics.iou > 0.7) {\n                classification = \"cancer\";\n            } else if (metrics.iou > 0.3) {\n                classification = \"polyp\";\n            }\n            return {\n                id,\n                image: `/images/${filename}`,\n                unet_mask: `/masks/${filename}`,\n                otsu_mask: null,\n                ...metrics,\n                classification\n            };\n        }));\n        // null 값 제거 및 결과 필터링\n        const validResults = results.filter((result)=>result !== null);\n        // results.json 파일 저장\n        const resultsPath = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"results.json\");\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(resultsPath, JSON.stringify(validResults, null, 2));\n        console.log(`Processed ${validResults.length} valid results`);\n        res.status(200).json({\n            success: true,\n            count: validResults.length\n        });\n    } catch (error) {\n        console.error(\"Error in setup:\", error);\n        res.status(500).json({\n            error: \"Failed to setup dataset\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNrQixDQUFBQSxTQUFVQSxXQUFXO1FBRXpELHFCQUFxQjtRQUNyQixNQUFNQyxjQUFjbkUsZ0RBQVMsQ0FBQ3dDLFFBQVFDLEdBQUcsSUFBSSxVQUFVO1FBQ3ZEMUMsdURBQWdCLENBQUNvRSxhQUFhRSxLQUFLQyxTQUFTLENBQUNMLGNBQWMsTUFBTTtRQUVqRWhELFFBQVFrQyxHQUFHLENBQUMsQ0FBQyxVQUFVLEVBQUVjLGFBQWFsRCxNQUFNLENBQUMsY0FBYyxDQUFDO1FBQzVEbUIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFa0MsU0FBUztZQUFNQyxPQUFPUCxhQUFhbEQsTUFBTTtRQUFDO0lBQ25FLEVBQUUsT0FBT0MsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsbUJBQW1CQTtRQUNqQ2tCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRXJCLE9BQU87UUFBMEI7SUFDMUQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BvbHlwLXNlZ21lbnRhdGlvbi13ZWIvLi9wYWdlcy9hcGkvc2V0dXAudHM/MDdhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgc2hhcnAgZnJvbSAnc2hhcnAnO1xuXG4vLyDsnbTrr7jsp4Ag67aE66WYIO2VqOyImCAoY2FuY2VyL3BvbHlwL25vcm1hbClcbmFzeW5jIGZ1bmN0aW9uIGNsYXNzaWZ5SW1hZ2UoaW1hZ2VQYXRoOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyDsnbTrr7jsp4Drpbwg66Gc65Oc7ZWY6rOgIOyghOyymOumrFxuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgc2hhcnAoaW1hZ2VQYXRoKVxuICAgICAgLnJlc2l6ZSgyMjQsIDIyNCkgLy8g7J2867CY7KCB7J24IENOTiDsnoXroKUg7YGs6riwXG4gICAgICAuZ3JheXNjYWxlKClcbiAgICAgIC5yYXcoKVxuICAgICAgLnRvQnVmZmVyKCk7XG5cbiAgICAvLyBUT0RPOiDsi6TsoJwg67aE66WYIOuqqOuNuCDqtaztmIRcbiAgICAvLyDtmITsnqzripQg7J6E7Iuc66GcIOydtOuvuOyngCDtirnshLHsl5Ag65Sw6528IOqwhOuLqO2VnCDqt5zsuZkg6riw67CYIOu2hOulmFxuICAgIGNvbnN0IG1lYW4gPSBBcnJheS5mcm9tKGltYWdlQnVmZmVyKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKSAvIGltYWdlQnVmZmVyLmxlbmd0aDtcbiAgICBcbiAgICBpZiAobWVhbiA+IDIwMCkgcmV0dXJuICdub3JtYWwnO1xuICAgIGlmIChtZWFuID4gMTUwKSByZXR1cm4gJ3BvbHlwJztcbiAgICByZXR1cm4gJ2NhbmNlcic7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2xhc3NpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiAndW5rbm93bic7XG4gIH1cbn1cblxuLy8g7J2066+47KeA7JmAIOuniOyKpO2BrOulvCDruYTqtZDtlZjsl6wg66mU7Yq466atIOqzhOyCsFxuYXN5bmMgZnVuY3Rpb24gY2FsY3VsYXRlTWV0cmljcyhpbWFnZVBhdGg6IHN0cmluZywgbWFza1BhdGg6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnN0IGltYWdlQnVmZmVyID0gYXdhaXQgc2hhcnAoaW1hZ2VQYXRoKS5yYXcoKS50b0J1ZmZlcigpO1xuICAgIGNvbnN0IG1hc2tCdWZmZXIgPSBhd2FpdCBzaGFycChtYXNrUGF0aCkucmF3KCkudG9CdWZmZXIoKTtcblxuICAgIGxldCB0cnVlUG9zaXRpdmVzID0gMDtcbiAgICBsZXQgZmFsc2VQb3NpdGl2ZXMgPSAwO1xuICAgIGxldCBmYWxzZU5lZ2F0aXZlcyA9IDA7XG4gICAgbGV0IHRydWVOZWdhdGl2ZXMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZUJ1ZmZlci5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaW1hZ2VQaXhlbCA9IGltYWdlQnVmZmVyW2ldID4gMTI3O1xuICAgICAgY29uc3QgbWFza1BpeGVsID0gbWFza0J1ZmZlcltpXSA+IDEyNztcblxuICAgICAgaWYgKGltYWdlUGl4ZWwgJiYgbWFza1BpeGVsKSB0cnVlUG9zaXRpdmVzKys7XG4gICAgICBlbHNlIGlmIChpbWFnZVBpeGVsICYmICFtYXNrUGl4ZWwpIGZhbHNlUG9zaXRpdmVzKys7XG4gICAgICBlbHNlIGlmICghaW1hZ2VQaXhlbCAmJiBtYXNrUGl4ZWwpIGZhbHNlTmVnYXRpdmVzKys7XG4gICAgICBlbHNlIHRydWVOZWdhdGl2ZXMrKztcbiAgICB9XG5cbiAgICBjb25zdCBwcmVjaXNpb24gPSB0cnVlUG9zaXRpdmVzIC8gKHRydWVQb3NpdGl2ZXMgKyBmYWxzZVBvc2l0aXZlcykgfHwgMDtcbiAgICBjb25zdCByZWNhbGwgPSB0cnVlUG9zaXRpdmVzIC8gKHRydWVQb3NpdGl2ZXMgKyBmYWxzZU5lZ2F0aXZlcykgfHwgMDtcbiAgICBjb25zdCBkaWNlID0gKDIgKiB0cnVlUG9zaXRpdmVzKSAvICgyICogdHJ1ZVBvc2l0aXZlcyArIGZhbHNlUG9zaXRpdmVzICsgZmFsc2VOZWdhdGl2ZXMpIHx8IDA7XG4gICAgY29uc3QgaW91ID0gdHJ1ZVBvc2l0aXZlcyAvICh0cnVlUG9zaXRpdmVzICsgZmFsc2VQb3NpdGl2ZXMgKyBmYWxzZU5lZ2F0aXZlcykgfHwgMDtcblxuICAgIHJldHVybiB7IHByZWNpc2lvbiwgcmVjYWxsLCBkaWNlLCBpb3UgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjYWxjdWxhdGluZyBtZXRyaWNzIGZvciAke2ltYWdlUGF0aH06YCwgZXJyb3IpO1xuICAgIHJldHVybiB7IHByZWNpc2lvbjogMCwgcmVjYWxsOiAwLCBkaWNlOiAwLCBpb3U6IDAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIC8vIOydtOuvuOyngCDrlJTroInthqDrpqzsl5DshJwg66qo65OgIO2MjOydvCDsnb3quLBcbiAgICBjb25zdCBpbWFnZXNEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdpbWFnZXMnKTtcbiAgICBjb25zdCBtYXNrc0RpciA9IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAncHVibGljJywgJ21hc2tzJyk7XG4gICAgXG4gICAgLy8g65SU66CJ7Yag66as6rCAIOyXhuycvOuptCDsg53shLFcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoaW1hZ2VzRGlyKSkge1xuICAgICAgZnMubWtkaXJTeW5jKGltYWdlc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICAgIGlmICghZnMuZXhpc3RzU3luYyhtYXNrc0RpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyhtYXNrc0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW1hZ2VGaWxlcyA9IGZzLnJlYWRkaXJTeW5jKGltYWdlc0RpcilcbiAgICAgIC5maWx0ZXIoZmlsZSA9PiBmaWxlLmVuZHNXaXRoKCcuanBnJykpO1xuXG4gICAgY29uc29sZS5sb2coYEZvdW5kICR7aW1hZ2VGaWxlcy5sZW5ndGh9IGltYWdlIGZpbGVzYCk7XG5cbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBpbWFnZUZpbGVzLm1hcChhc3luYyAoZmlsZW5hbWUpID0+IHtcbiAgICAgICAgY29uc3QgaWQgPSBmaWxlbmFtZS5yZXBsYWNlKCcuanBnJywgJycpO1xuICAgICAgICBjb25zdCBpbWFnZVBhdGggPSBwYXRoLmpvaW4oaW1hZ2VzRGlyLCBmaWxlbmFtZSk7XG4gICAgICAgIGNvbnN0IG1hc2tQYXRoID0gcGF0aC5qb2luKG1hc2tzRGlyLCBmaWxlbmFtZSk7XG5cbiAgICAgICAgLy8g7J2066+47KeA7JmAIOuniOyKpO2BrOqwgCDsobTsnqztlZjripTsp4Ag7ZmV7J24XG4gICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhpbWFnZVBhdGgpIHx8ICFmcy5leGlzdHNTeW5jKG1hc2tQYXRoKSkge1xuICAgICAgICAgIGNvbnNvbGUud2FybihgTWlzc2luZyBmaWxlcyBmb3IgJHtmaWxlbmFtZX1gKTtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOuplO2KuOumrSDqs4TsgrBcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IGF3YWl0IGNhbGN1bGF0ZU1ldHJpY3MoaW1hZ2VQYXRoLCBtYXNrUGF0aCk7XG4gICAgICAgIFxuICAgICAgICAvLyDrtoTrpZgg6rKw7KCVICjsmIjsi5w6IElvVSDsoJDsiJgg6riw67CYKVxuICAgICAgICBsZXQgY2xhc3NpZmljYXRpb24gPSAnbm9ybWFsJztcbiAgICAgICAgaWYgKG1ldHJpY3MuaW91ID4gMC43KSB7XG4gICAgICAgICAgY2xhc3NpZmljYXRpb24gPSAnY2FuY2VyJztcbiAgICAgICAgfSBlbHNlIGlmIChtZXRyaWNzLmlvdSA+IDAuMykge1xuICAgICAgICAgIGNsYXNzaWZpY2F0aW9uID0gJ3BvbHlwJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaWQsXG4gICAgICAgICAgaW1hZ2U6IGAvaW1hZ2VzLyR7ZmlsZW5hbWV9YCxcbiAgICAgICAgICB1bmV0X21hc2s6IGAvbWFza3MvJHtmaWxlbmFtZX1gLFxuICAgICAgICAgIG90c3VfbWFzazogbnVsbCxcbiAgICAgICAgICAuLi5tZXRyaWNzLFxuICAgICAgICAgIGNsYXNzaWZpY2F0aW9uXG4gICAgICAgIH07XG4gICAgICB9KVxuICAgICk7XG5cbiAgICAvLyBudWxsIOqwkiDsoJzqsbAg67CPIOqysOqzvCDtlYTthLDrp4FcbiAgICBjb25zdCB2YWxpZFJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyZXN1bHQgPT4gcmVzdWx0ICE9PSBudWxsKTtcblxuICAgIC8vIHJlc3VsdHMuanNvbiDtjIzsnbwg7KCA7J6lXG4gICAgY29uc3QgcmVzdWx0c1BhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICdyZXN1bHRzLmpzb24nKTtcbiAgICBmcy53cml0ZUZpbGVTeW5jKHJlc3VsdHNQYXRoLCBKU09OLnN0cmluZ2lmeSh2YWxpZFJlc3VsdHMsIG51bGwsIDIpKTtcblxuICAgIGNvbnNvbGUubG9nKGBQcm9jZXNzZWQgJHt2YWxpZFJlc3VsdHMubGVuZ3RofSB2YWxpZCByZXN1bHRzYCk7XG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBjb3VudDogdmFsaWRSZXN1bHRzLmxlbmd0aCB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBzZXR1cDonLCBlcnJvcik7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBzZXR1cCBkYXRhc2V0JyB9KTtcbiAgfVxufSAiXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwic2hhcnAiLCJjbGFzc2lmeUltYWdlIiwiaW1hZ2VQYXRoIiwiaW1hZ2VCdWZmZXIiLCJyZXNpemUiLCJncmF5c2NhbGUiLCJyYXciLCJ0b0J1ZmZlciIsIm1lYW4iLCJBcnJheSIsImZyb20iLCJyZWR1Y2UiLCJhIiwiYiIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsImNhbGN1bGF0ZU1ldHJpY3MiLCJtYXNrUGF0aCIsIm1hc2tCdWZmZXIiLCJ0cnVlUG9zaXRpdmVzIiwiZmFsc2VQb3NpdGl2ZXMiLCJmYWxzZU5lZ2F0aXZlcyIsInRydWVOZWdhdGl2ZXMiLCJpIiwiaW1hZ2VQaXhlbCIsIm1hc2tQaXhlbCIsInByZWNpc2lvbiIsInJlY2FsbCIsImRpY2UiLCJpb3UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RhdHVzIiwianNvbiIsImltYWdlc0RpciIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwibWFza3NEaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwiaW1hZ2VGaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsdGVyIiwiZmlsZSIsImVuZHNXaXRoIiwibG9nIiwicmVzdWx0cyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmaWxlbmFtZSIsImlkIiwicmVwbGFjZSIsIndhcm4iLCJtZXRyaWNzIiwiY2xhc3NpZmljYXRpb24iLCJpbWFnZSIsInVuZXRfbWFzayIsIm90c3VfbWFzayIsInZhbGlkUmVzdWx0cyIsInJlc3VsdCIsInJlc3VsdHNQYXRoIiwid3JpdGVGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzdWNjZXNzIiwiY291bnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/setup.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsetup&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsetup.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();